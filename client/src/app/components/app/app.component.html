<div>
    <mat-toolbar class="alignRight">
        <img class="app-icon" src="../../../assets/Icon/PolyBee.png">
        <h1 class="app-name">POLYDESSIN &nbsp; &nbsp;</h1>
        <mat-nav-list>
            <a *ngIf='drawingStorage.drawings.length; else noUndo' mat-button class="filter toolbar"
                (click)="clipboardService.undo()">
                <img id="Annuler" class="sideBarIcon" src="../../../assets/toolbar/back-arrow.svg" title="Annuler">
            </a>
            <ng-template #noUndo>
                <a mat-button class="disabled toolbar">
                    <img id="Refaire" class="sideBarIcon" src="../../../assets/toolbar/back-arrow.svg" title="Annuler">
                </a>
            </ng-template>
            <a *ngIf='clipboardService.undoRedoService.undoList.length; else noRedo' mat-button class="filter toolbar"
                (click)="clipboardService.redo()">
                <img id="Refaire" class="sideBarIcon" src="../../../assets/toolbar/redo-arrow.svg" title="Refaire">
            </a>
            <ng-template #noRedo>
                <a mat-button class="disabled toolbar">
                    <img id="Refaire" class="sideBarIcon" src="../../../assets/toolbar/redo-arrow.svg" title="Refaire">
                </a>
            </ng-template>
        </mat-nav-list>
        <mat-divider class="toolbar-divider" [vertical]="true"></mat-divider>
        <mat-nav-list>
            <a mat-button (click)='toolHandler.choosePrimaryColour(); openChooseColourDialog()'>
                <div class="colour-preview" title="Couleur principale"
                    [ngStyle]="{'background-color': colourService.colour[0]}">
                </div>
            </a>
            <a mat-button (click)="colourService.switchColours()">
                <img class="switchIcon filter toolbar" src="./assets/sidebar/switch.png" title="Changer couleurs">
            </a>
            <a mat-button (click)='toolHandler.chooseSecondaryColour(); openChooseColourDialog()'>
                <div class="colour-preview" title="Couleur secondaire"
                    [ngStyle]="{'background-color': colourService.colour[1]}">
                </div>
            </a>
        </mat-nav-list>
        <mat-divider class="toolbar-divider" [vertical]="true"></mat-divider>
        <mat-nav-list>
            <ng-container *ngIf="toolHandler.selectedTool === toolHandler.tools.SELECTOR && clipboardService.selectorService.selectedObjects.size; 
                            then selected; else notSelected">
            </ng-container>
            <ng-template #selected>
                <a mat-button class="filter toolbar" (click)="clipboardService.copy()">
                    <img id="copy" class="clipboardIcon" src="../../../assets/toolbar/copy.png" title="Copier">
                </a>
                <a mat-button class="filter toolbar" (click)='clipboardService.paste(0,0)'>
                    <img id="paste" class="clipboardIcon" src="../../../assets/toolbar/paste.png" title="Coller">
                </a>
                <a mat-button class="filter toolbar" (click)='clipboardService.cut()'>
                    <img id="cut" class="clipboardIcon" src="../../../assets/toolbar/cut.png" title="Couper">
                </a>
                <a mat-button class="filter toolbar" (click)='clipboardService.duplicate()'>
                    <img id="duplicate" class="clipboardIcon" src="../../../assets/toolbar/duplicate.png"
                        title="Dupliquer">
                </a>
                <a mat-button class="filter toolbar" (click)='clipboardService.delete()'>
                    <img id="delete" class="clipboardIcon" src="../../../assets/toolbar/delete.png" title="Supprimer">
                </a>
            </ng-template>
            <ng-template #notSelected>
                <a mat-button class="disabled toolbar" (click)='clipboardService.copy()'>
                    <img id="copy" class="clipboardIcon" src="../../../assets/toolbar/copy.png" title="Copier">
                </a>
                <a mat-button class="disabled toolbar" (click)='clipboardService.paste(0,0)'>
                    <img id="paste" class="clipboardIcon" src="../../../assets/toolbar/paste.png" title="Coller">
                </a>
                <a mat-button class="disabled toolbar" (click)='clipboardService.cut()'>
                    <img id="cut" class="clipboardIcon" src="../../../assets/toolbar/cut.png" title="Couper">
                </a>
                <a mat-button class="disabled toolbar" (click)='clipboardService.duplicate()'>
                    <img id="duplicate" class="clipboardIcon" src="../../../assets/toolbar/duplicate.png"
                        title="Dupliquer">
                </a>
                <a mat-button class="disabled toolbar" (click)='clipboardService.delete()'>
                    <img id="delete" class="clipboardIcon" src="../../../assets/toolbar/delete.png" title="Supprimer">
                </a>
            </ng-template>
        </mat-nav-list>
        <mat-divider class="toolbar-divider" [vertical]="true"></mat-divider>
        <mat-nav-list>
            <a mat-button class="filter toolbar" (click)="gridMenuTrigger.openMenu()">
                <img id="grid" class="sideBarIcon" src="../../../assets/toolbar/grid.png" title="Grille">
                <a [matMenuTriggerFor]="gridMenu" #gridMenuTrigger="matMenuTrigger"
                    (click)="gridMenuTrigger.openMenu()"></a>
            </a>
            <mat-menu #gridMenu="matMenu" class="filter">
                <div style = "padding: 6px">
                    <p class="mat-h1 filter"> Grille </p>
                    <label class="switch" (click)="$event.stopPropagation()">
                        <input type="checkbox">
                        <span #toggle class="slider" (click)="gridService.toggleGrid()"></span>
                    </label>
                    <br>
                    <div *ngIf="gridService.gridStatus">
                        <p class="filter"> Opacité: </p>
                        <mat-slider class="filter" title = "Valeur d'opacité"
                            [min]="0.2" [max]="1" [step]="0.05" [thumbLabel]="true"
                            (click)="$event.stopPropagation()" (input)="gridService.gridOpacity = $event.value"
                            [(ngModel)]="gridService.gridOpacity">
                        </mat-slider>
                        <label class="filter">{{gridService.gridOpacity}}%</label>
                        <br>
                        <p class="filter"> Taille: </p>
                        <mat-slider class="filter" title = "Taille des carrés"
                            [min]="10" [max]="150" [step]="1" [thumbLabel]="true"
                            (change) = "gridService.gridSize" (input)="gridService.gridSize = $event.value"
                            (click)="$event.stopPropagation()" [(ngModel)]="gridService.gridSize">
                        </mat-slider>
                        <label class="filter"> {{gridService.gridSize}}px </label>
                    </div>
                </div>
            </mat-menu>
            <a mat-button class="filter toolbar" (click)="magnetismMenuTrigger.openMenu()">
                <img id="grid" class="sideBarIcon" src="../../../assets/toolbar/magnet.png" title="Magnétisme">
                <a [matMenuTriggerFor]="magnetismMenu" #magnetismMenuTrigger="matMenuTrigger"
                    (click)="magnetismMenuTrigger.openMenu()"></a>
                <mat-menu #magnetismMenu="matMenu" class="filter">
                    <p class="mat-h2 filter"> Magnétisme: </p>
                    <label class="switch" (click)="$event.stopPropagation()">
                        <input type="checkbox">
                        <span #snapToggle class="slider" (click)="dragService.toggleSnapping()"></span>
                    </label>
                    <form>
                        <input type="radio" checked name="controlPoint" id="top_left" checked="checked" [value]="0"
                            [(ngModel)]="controlPoint" (change)="onSelectionChange()">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="radio" name="controlPoint" id="top_middle" [value]="1" [(ngModel)]="controlPoint"
                            (change)="onSelectionChange()">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="radio" name="controlPoint" id="top_right" [value]="2" [(ngModel)]="controlPoint"
                            (change)="onSelectionChange()">
                        <p><br> </p>
                        <input type="radio" name="controlPoint" id="middle_left" [value]="3" [(ngModel)]="controlPoint"
                            (change)="onSelectionChange()">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="radio" name="controlPoint" id="middle" [value]="4" [(ngModel)]="controlPoint"
                            (change)="onSelectionChange()">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="radio" name="controlPoint" id="middle_right" [value]="5" [(ngModel)]="controlPoint"
                            (change)="onSelectionChange()">
                        <p><br></p>
                        <input type="radio" name="controlPoint" id="bottom_left" [value]="6" [(ngModel)]="controlPoint"
                            (change)="onSelectionChange()">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="radio" name="controlPoint" id="bottom_middle" [value]="7"
                            [(ngModel)]="controlPoint" (change)="onSelectionChange()">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="radio" name="controlPoint" id="bottom_right" [value]="8" [(ngModel)]="controlPoint"
                            (change)="onSelectionChange()">

                    </form>
                </mat-menu>
            </a>
        </mat-nav-list>
        <span style="flex: 1 1 auto"></span>
        <a class="filter extra-icon" (click)="options.toggle()">
            <img id="openExtras" src="../../../assets/toolbar/extra.svg" title="Extras">
        </a>
    </mat-toolbar>
    <mat-sidenav-container hasBackdrop="false">
        <mat-sidenav #sidenav mode="side" fixedBottomGap="200" opened disableClose>
            <mat-nav-list>
                <a mat-list-item class="filter" (click)="toolHandler.chooseSelector()">
                    <img class="clipboardIcon" src="../../../assets/sidebar/select.png" title="Sélection">
                </a>
                <a mat-list-item class="filter" (click)="drawingMenuTrigger.openMenu()">
                    <img id="shapes" class="sideBarIcon" src="../../../assets/sidebar/draw.png" title="Dessin">
                    <a [matMenuTriggerFor]="drawingMenu" #drawingMenuTrigger="matMenuTrigger"
                        (click)="drawingMenuTrigger.openMenu()"></a>
                </a>
                <mat-menu #drawingMenu="matMenu">
                    <button mat-menu-item (click)='toolHandler.chooseCrayon(); options.open()'>
                        <img id="pencil" class="sideBarIcon filter" src="../../../assets/sidebar/pencil-top.png"> &#8194; Crayon
                    </button>
                    <button mat-menu-item (click)='toolHandler.choosePaintbrush(); options.open()'>
                        <img id="brush" class="sideBarIcon filter" src="../../../assets/sidebar/paintbrush-top.png"> &emsp; Pinceau
                    </button>
                    <button mat-menu-item (click)='toolHandler.choosePen(); options.open()'>   
                        <img id="pen" class="sideBarIcon filter" src="../../../assets/sidebar/pen-top.png"> &emsp; Stylo
                    </button>
                    <button mat-menu-item (click)='toolHandler.chooseQuill(); options.open()'>
                        <img id="feather" class="sideBarIcon filter" src="../../../assets/sidebar/quill.png"> &emsp; Plume
                    </button>
                </mat-menu>
                <a mat-list-item class="filter" (click)='toolHandler.chooseLine(); options.open()'>
                    <img id="line" class="sideBarIcon" src="../../../assets/sidebar/line.png" title="Ligne">
                </a>
                <a mat-list-item class="filter" (click)="shapesMenuTrigger.openMenu()">
                    <img id="shapes" class="sideBarIcon" src="../../../assets/sidebar/shapes.png" title="Formes">
                    <a [matMenuTriggerFor]="shapeMenu" #shapesMenuTrigger="matMenuTrigger"></a>
                </a>
                <a mat-list-item class="filter" (click)='toolHandler.chooseSprayCan(); options.open()'>
                    <img id="sprayCan" class="sideBarIcon" src="../../../assets/sidebar/spray.png" title="Aérosol">
                </a>
                <a mat-list-item class="filter" (click)='toolHandler.chooseOther(); options.open()'>
                    <img id="bucket" class="sideBarIcon" src="../../../assets/sidebar/bucket.png" title="Sceau">
                </a>
                <a mat-list-item class="filter" (click)='toolHandler.chooseEraser(); options.open()'>
                    <img id='eraser' class="sideBarIcon" src="../../../assets/sidebar/eraser.png" title="Efface">
                </a>
                <a mat-list-item class="filter" (click)='toolHandler.chooseColourApplicator()'>
                    <img id='colourChanger' class="sideBarIcon" src="../../../assets/sidebar/applicator.png"
                        title="Applicateur de couleur">
                </a>
                <a mat-list-item class="filter" (click)='toolHandler.chooseEyedropper()'>
                    <img id='pipette' class="sideBarIcon" src="../../../assets/sidebar/pipette.png" title="Pipette">
                </a>
                <a mat-list-item class="filter" (click)="toolHandler.chooseStamp(); options.open()">
                    <img id="stamp" class="sideBarIcon" src="../../../assets/sidebar/sticker.png" title="Étampe">
                </a>
                <mat-menu #shapeMenu="matMenu">
                    <button mat-menu-item (click)='toolHandler.chooseRectangle(); options.open()'>Rectangle</button>
                    <button mat-menu-item (click)='toolHandler.chooseEllipse(); options.open()'>Ellipse</button>
                    <button mat-menu-item (click)='toolHandler.choosePolygon(); options.open()'>Polygon</button>
                </mat-menu>
                <a mat-list-item class="filter" (click)='toolHandler.chooseText(); options.open()'>
                    <img id='text' class="sideBarIcon" src="../../../assets/sidebar/text.svg"
                        title="Texte">
                </a>
                <a mat-list-item class="filter" href="../../../assets/Guide d'utilisation.pdf">
                    <img class="sideBarIcon" src="../../../assets/sidebar/help.png" title="Guide d'utilisation">
                </a>
            </mat-nav-list>
        </mat-sidenav>
        <app-canvas #canvas></app-canvas>
        <mat-sidenav #options class="right-sidenav" mode="over" opened position="end">
            <br>
            <mat-option class="filter" (click)='toolHandler.choosePrimaryColour(); openChooseColourDialog()'>
                <img id="colourPalette" class="sideBarIcon" src="../../../assets/toolbar/palette.png"
                    title="Palette de couleurs">
                <a class='option'>Choisir les couleurs</a>
            </mat-option>
            <mat-option class="filter" (click)="confirmNewDrawing()">
                <img id="newDrawing" class="sideBarIcon" src="../../../assets/toolbar/new-drawing.svg"
                    title="Nouveau dessin">
                <a class='option'>Nouveau dessin</a>
            </mat-option>
            <mat-option class="filter" (click)="openSaveWindow()">
                <img id="saveDrawing" class="sideBarIcon" src="../../../assets/toolbar/save.png"
                    title="Sauvegarde dessin">
                <a class='option'>Sauvegarder le dessin</a>
            </mat-option>
            <mat-option class="filter" (click)="openExportWindow()">
                <img id="saveDrawing" class="sideBarIcon" src="../../../assets/toolbar/export.png"
                    title="Export dessin">
                <a class='option'>Exporter le dessin</a>
            </mat-option>
            <mat-option class="filter" (click)="openGalleryWindow()">
                <img id="openGallery" class="sideBarIcon" src="../../../assets/toolbar/gallery.png"
                    title="Ouvrir la gallerie">
                <a class='option'>Ouvrir la gallerie</a>
            </mat-option>
            <mat-divider></mat-divider>
            <mat-nav-list>
                <app-drawing-tool-toolbox [canvas]='canvas'></app-drawing-tool-toolbox>
            </mat-nav-list>
        </mat-sidenav>
    </mat-sidenav-container>
</div>