<svg tabindex="0" class="canvas" [attr.width]="data.drawingWidth" [attr.height]="data.drawingHeight" [attr.fill]="data.drawingColor">
    <rect class="rectangle" width=100% height=100%/>  

    <g *ngFor = "let line of storage.drawings">

        <filter id="filter1">
            <feTurbulence type="turbulence" baseFrequency="0.05" numOctaves="1" result="turbulence"/>
            <feDisplacementMap in2="turbulence" in="SourceGraphic" scale="10" xChannelSelector="R" yChannelSelector="G"/>
        </filter>

        <filter id="filter2">
            <feGaussianBlur in="SourceGraphic" stdDeviation="3"/>
        </filter>

        <filter id="filter3">
            <feTurbulence type="turbulence" baseFrequency="0.05" numOctaves="1" result="turbulence"/>
            <feGaussianBlur in="SourceGraphic" stdDeviation="3" result="blurOut"/>
            <feDisplacementMap in2="turbulence" in="blurOut" scale="10" xChannelSelector="R" yChannelSelector="G"/>
        </filter>
            
        <filter id="filter4">
            <feOffset result="offOut" in="StrokePaint" dx="0.05" dy="0.05" />
            <feGaussianBlur result="blurOut" in="offOut" stdDeviation="1" />
            <feOffset result="offOut2" in="StrokePaint" dx="0.2" dy="0.2" />
            <feGaussianBlur result="blurOut2" in="offOut2" stdDeviation="5" />
            <feBlend in="blurOut" in2="blurOut2" mode="normal" />
        </filter>

    <g [ngSwitch]="line.id">
        <g *ngSwitchCase="toolID.CRAYON">
            <polyline 
            [attr.points]="line.points"
            [style.fill]="line.fill"
            [style.stroke]="line.color"
            [style.stroke-width]="line.strokeWidth"
            [style.stroke-linecap]="line.strokeLinecap"
            [style.stroke-linejoin]="line.strokeLinejoin"
            />
        </g>
        <g *ngSwitchCase="toolID.PAINTBRUSH">
            <polyline 
            [attr.points]="line.points"
            [style.fill]="line.fill"
            [style.stroke]="line.color"
            [style.stroke-width]="line.strokeWidth"
            [style.stroke-linecap]="line.strokeLinecap"
            [style.stroke-linejoin]="line.strokeLinejoin"
            [style.filter]="line.filter"
            />
        </g>
        <g *ngSwitchCase="toolId.RECTANGLE">
            <rect [attr.x] ="drawing.x" [attr.y]="drawing.y" [attr.width]="drawing.width" [attr.height]="drawing.height"
            [style.stroke]="drawing.secondaryColor" 
            [style.fill]="drawing.primaryColor"  
            [style.stroke-opacity]="drawing.strokeOpacity"
            [style.stroke-width]="drawing.strokeWidth"
            [style.fill-opacity]="drawing.fillOpacity"/>
        </g>
    </g>
</g>
</svg>

<div *ngIf="storage.crayonSelected">
    <app-crayon #activeTool [windowWidth]="data.drawingWidth" [windowHeight]="data.drawingHeight"></app-crayon>
</div>
<div *ngIf="storage.paintbrushSelected">
    <app-paintbrush #activeTool [windowWidth]="data.drawingWidth" [windowHeight]="data.drawingHeight"></app-paintbrush>
</div>
<div *ngIf="toolHandler.rectangleSelected">
    <app-tools-rectangle #activeTool [windowWidth]="data.drawingWidth" [windowHeight]="data.drawingHeight"></app-tools-rectangle>
</div>
