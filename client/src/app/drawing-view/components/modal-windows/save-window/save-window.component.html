<div mat-dialog-container class='save_window'>
    <h1 mat-dialog-title id='save_window_title'>{{data.title}}</h1>
    <div mat-dialog-content>
        <h3 id="header-3">Veuillez entrer les informations nécessaires pour sauvegarder le dessin.</h3>
        <form (ngSubmit)="onAcceptClick()" #saveDrawingForm="ngForm">
            <div class="form-group">
                <label for="nameInput">Nom: </label>
                <mat-form-field appearance="fill">
                    <input matInput required id="nameInput" name="nameInput" class="form-control" [(ngModel)]="name"
                        placeholder="Nom du dessin." #nameInput="ngModel">
                    <div *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)" class="alert alert-danger">
                        <mat-error *ngIf="nameInput.errors.required">
                            Le nom du dessin ne doit pas être nul.
                        </mat-error>
                    </div>
                </mat-form-field>
                <label for="userTagInput">Étiquettes: </label>
                <mat-form-field appearance="fill">
                    <input #userTagInput matInput id="userTagInput" name="userTagInput" class="form-control"
                        placeholder="(Optionnel)." pattern="([\w\s])+" minlength="1">
                    <div *ngIf="userTagInput.invalid && (userTagInput.dirty || userTagInput.touched)"
                        class="alert alert-danger">
                        <mat-error *ngIf="userTagInput.errors.pattern">
                            Les étiquettes doivent être alphanumériques et non-nulles si présentes.
                        </mat-error>
                    </div>
                </mat-form-field>
                <button id="add" type="button" mat-raised-button (click)="addTag(userTagInput.value)">Ajouter
                    l'étiquette</button>
                <ul>
                    <li id="list-style" *ngFor="let tag of data.displayedTags">
                        <button mat-stroked-button type="button" (click)="clickOnTag(tag)"
                            [class.selected-tag]="tag.isSelected">#{{tag.name}}</button>
                    </li>
                </ul>
            </div>
        </form>
        <div>
            <button id="saveAs" type="button" mat-raised-button [matMenuTriggerFor]="saveMenu"
                #menuTrigger="matMenuTrigger" (click)="menuTrigger.openMenu()">{{saveString}}</button>
            <mat-menu #saveMenu="matMenu">
                <button mat-menu-item (click)='chooseSavingType(saveAsEnum.LOCAL)'>Sauvegarder localement</button>
                <button mat-menu-item (click)='chooseSavingType(saveAsEnum.SERVER)'>Sauvegarder sur le serveur</button>
                <button mat-menu-item (click)='chooseSavingType(saveAsEnum.DATABASE)'>Sauvegarder sur la base de données</button>
            </mat-menu>
        </div>
        <button id="close" type="button" mat-raised-button (click)="onClose()">Fermer</button>
        <button id="submit" mat-raised-button [disabled]="!nameInput.valid || !isFinishedSaving || !saveAsSelected"
            (click)="onAcceptClick()">Accepter</button>
    </div>
</div>